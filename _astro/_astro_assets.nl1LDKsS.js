import{c as T,m as dt,_ as gt}from"./hoisted.FVeXbOBT.js";import{A as u,a as M,b as z,E as D,c as C,r as tt,i as U,F as G,d as N,e as ft,D as mt,f as ut,g as et}from"./astro/assets-service.Cg1E-ILE.js";import{c as st,r as O,m as rt}from"./render-template.S50T7x2l.js";const wt="4.9.2";function pt(){return e=>{if(typeof e=="string")throw new u({...M,message:M.message(JSON.stringify(e))});let s=[...Object.values(e)];if(s.length===0)throw new u({...z,message:z.message(JSON.stringify(e))});return Promise.all(s.map(r=>r()))}}function it(t){return{site:new URL(t),generator:`Astro v${wt}`,glob:pt()}}function v(t={},e,{class:s}={}){let r="";s&&(typeof t.class<"u"?t.class+=` ${s}`:typeof t["class:list"]<"u"?t["class:list"]=[t["class:list"],s]:t.class=s);for(const[i,n]of Object.entries(t))r+=T(n,i,!0);return dt(r)}const It=new TextDecoder,c=(t,e=0,s=t.length)=>It.decode(t.slice(e,s)),E=(t,e=0,s=t.length)=>t.slice(e,s).reduce((r,i)=>r+("0"+i.toString(16)).slice(-2),""),j=(t,e=0)=>{const s=t[e]+t[e+1]*256;return s|(s&2**15)*131070},P=(t,e=0)=>t[e]*2**8+t[e+1],d=(t,e=0)=>t[e]+t[e+1]*2**8,Y=(t,e=0)=>t[e]+t[e+1]*2**8+t[e+2]*2**16,bt=(t,e=0)=>t[e]+t[e+1]*2**8+t[e+2]*2**16+(t[e+3]<<24),h=(t,e=0)=>t[e]*2**24+t[e+1]*2**16+t[e+2]*2**8+t[e+3],I=(t,e=0)=>t[e]+t[e+1]*2**8+t[e+2]*2**16+t[e+3]*2**24,vt={readUInt16BE:P,readUInt16LE:d,readUInt32BE:h,readUInt32LE:I};function g(t,e,s,r){s=s||0;const i=r?"BE":"LE",n="readUInt"+e+i;return vt[n](t,s)}function Et(t,e){if(t.length-e<4)return;const s=h(t,e);if(!(t.length-e<s))return{name:c(t,4+e,8+e),offset:e,size:s}}function p(t,e,s){for(;s<t.length;){const r=Et(t,s);if(!r)break;if(r.name===e)return r;s+=r.size}}const yt={validate:t=>c(t,0,2)==="BM",calculate:t=>({height:Math.abs(bt(t,22)),width:I(t,18)})},Tt=1,St=6,At=16;function V(t,e){const s=t[e];return s===0?256:s}function J(t,e){const s=St+e*At;return{height:V(t,s+1),width:V(t,s)}}const nt={validate(t){const e=d(t,0),s=d(t,4);return e!==0||s===0?!1:d(t,2)===Tt},calculate(t){const e=d(t,4),s=J(t,0);if(e===1)return s;const r=[s];for(let i=1;i<e;i+=1)r.push(J(t,i));return{height:s.height,images:r,width:s.width}}},_t=2,Pt={validate(t){const e=d(t,0),s=d(t,4);return e!==0||s===0?!1:d(t,2)===_t},calculate:t=>nt.calculate(t)},xt={validate:t=>I(t,0)===542327876,calculate:t=>({height:I(t,12),width:I(t,16)})},Ft=/^GIF8[79]a/,kt={validate:t=>Ft.test(c(t,0,6)),calculate:t=>({height:d(t,8),width:d(t,6)})},at={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"};function Nt(t,e,s){let r={};for(let i=e;i<=s;i+=4){const n=c(t,i,i+4);n in at&&(r[n]=1)}if("avif"in r)return"avif";if("heic"in r||"heix"in r||"hevc"in r||"hevx"in r)return"heic";if("mif1"in r||"msf1"in r)return"heif"}const Ot={validate(t){const e=c(t,4,8),s=c(t,8,12);return e==="ftyp"&&s in at},calculate(t){const e=p(t,"meta",0),s=e&&p(t,"iprp",e.offset+12),r=s&&p(t,"ipco",s.offset+8),i=r&&p(t,"ispe",r.offset+8);if(i)return{height:h(t,i.offset+16),width:h(t,i.offset+12),type:Nt(t,8,e.offset)};throw new TypeError("Invalid HEIF, no size found")}},Lt=8,$t=4,Rt=4,Bt={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function X(t,e){const s=e+Rt;return[c(t,e,s),h(t,s)]}function W(t){const e=Bt[t];return{width:e,height:e,type:t}}const Ht={validate:t=>c(t,0,4)==="icns",calculate(t){const e=t.length,s=h(t,$t);let r=Lt,i=X(t,r),n=W(i[0]);if(r+=i[1],r===s)return n;const o={height:n.height,images:[n],width:n.width};for(;r<s&&r<e;)i=X(t,r),n=W(i[0]),r+=i[1],o.images.push(n);return o}},Mt={validate:t=>E(t,0,4)==="ff4fff51",calculate:t=>({height:h(t,12),width:h(t,8)})},zt={validate(t){if(h(t,4)!==1783636e3||h(t,0)<1)return!1;const e=p(t,"ftyp",0);return e?h(t,e.offset+4)===1718909296:!1},calculate(t){const e=p(t,"jp2h",0),s=e&&p(t,"ihdr",e.offset+8);if(s)return{height:h(t,s.offset+8),width:h(t,s.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},Dt="45786966",Ct=2,L=6,Ut=2,Gt="4d4d",jt="4949",Z=12,Yt=2;function Vt(t){return E(t,2,6)===Dt}function Jt(t,e){return{height:P(t,e),width:P(t,e+2)}}function Xt(t,e){const r=L+8,i=g(t,16,r,e);for(let n=0;n<i;n++){const o=r+Yt+n*Z,f=o+Z;if(o>t.length)return;const l=t.slice(o,f);if(g(l,16,0,e)===274)return g(l,16,2,e)!==3||g(l,32,4,e)!==1?void 0:g(l,16,8,e)}}function Wt(t,e){const s=t.slice(Ct,e),r=E(s,L,L+Ut),i=r===Gt;if(i||r===jt)return Xt(s,i)}function Zt(t,e){if(e>t.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}const Kt={validate:t=>E(t,0,2)==="ffd8",calculate(t){t=t.slice(4);let e,s;for(;t.length;){const r=P(t,0);if(t[r]!==255){t=t.slice(1);continue}if(Vt(t)&&(e=Wt(t,r)),Zt(t,r),s=t[r+1],s===192||s===193||s===194){const i=Jt(t,r+5);return e?{height:i.height,orientation:e,width:i.width}:i}t=t.slice(r+2)}throw new TypeError("Invalid JPG, no size found")}},qt={validate:t=>{const e=c(t,1,7);return["KTX 11","KTX 20"].includes(e)},calculate:t=>{const e=t[5]===49?"ktx":"ktx2",s=e==="ktx"?36:20;return{height:I(t,s+4),width:I(t,s),type:e}}},Qt=`PNG\r

`,te="IHDR",K="CgBI",ee={validate(t){if(Qt===c(t,1,8)){let e=c(t,12,16);if(e===K&&(e=c(t,28,32)),e!==te)throw new TypeError("Invalid PNG");return!0}return!1},calculate(t){return c(t,12,16)===K?{height:h(t,36),width:h(t,32)}:{height:h(t,20),width:h(t,16)}}},q={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},Q={default:t=>{let e=[];for(;t.length>0;){const s=t.shift();if(s[0]!=="#"){e=s.split(" ");break}}if(e.length===2)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{const e={};for(;t.length>0;){const s=t.shift();if(s.length>16||s.charCodeAt(0)>128)continue;const[r,i]=s.split(" ");if(r&&i&&(e[r.toLowerCase()]=parseInt(i,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}},se={validate:t=>c(t,0,2)in q,calculate(t){const e=c(t,0,2),s=q[e],r=c(t,3).split(/[\r\n]+/);return(Q[s]||Q.default)(r)}},re={validate:t=>c(t,0,4)==="8BPS",calculate:t=>({height:h(t,14),width:h(t,18)})},ot=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,_={height:/\sheight=(['"])([^%]+?)\1/,root:ot,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},k=2.54,ct={in:96,cm:96/k,em:16,ex:8,m:96/k*100,mm:96/k/10,pc:96/72/12,pt:96/72,px:1},ie=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(ct).join("|")})?$`);function x(t){const e=ie.exec(t);if(e)return Math.round(Number(e[1])*(ct[e[2]]||1))}function ne(t){const e=t.split(" ");return{height:x(e[3]),width:x(e[2])}}function ae(t){const e=t.match(_.width),s=t.match(_.height),r=t.match(_.viewbox);return{height:s&&x(s[2]),viewbox:r&&ne(r[2]),width:e&&x(e[2])}}function oe(t){return{height:t.height,width:t.width}}function ce(t,e){const s=e.width/e.height;return t.width?{height:Math.floor(t.width/s),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*s)}:{height:e.height,width:e.width}}const le={validate:t=>ot.test(c(t,0,1e3)),calculate(t){const e=c(t).match(_.root);if(e){const s=ae(e[0]);if(s.width&&s.height)return oe(s);if(s.viewbox)return ce(s,s.viewbox)}throw new TypeError("Invalid SVG")}},he={validate(t){return d(t,0)===0&&d(t,4)===0},calculate(t){return{height:d(t,14),width:d(t,12)}}};function de(t,e){const s=g(t,32,4,e);return t.slice(s+2)}function ge(t,e){const s=g(t,16,8,e);return(g(t,16,10,e)<<16)+s}function fe(t){if(t.length>24)return t.slice(12)}function me(t,e){const s={};let r=t;for(;r&&r.length;){const i=g(r,16,0,e),n=g(r,16,2,e),o=g(r,32,4,e);if(i===0)break;o===1&&(n===3||n===4)&&(s[i]=ge(r,e)),r=fe(r)}return s}function ue(t){const e=c(t,0,2);if(e==="II")return"LE";if(e==="MM")return"BE"}const we=["49492a00","4d4d002a"],pe={validate:t=>we.includes(E(t,0,4)),calculate(t){const e=ue(t)==="BE",s=de(t,e),r=me(s,e),i=r[256],n=r[257];if(!i||!n)throw new TypeError("Invalid Tiff. Missing tags");return{height:n,width:i}}};function Ie(t){return{height:1+Y(t,7),width:1+Y(t,4)}}function be(t){return{height:1+((t[4]&15)<<10|t[3]<<2|(t[2]&192)>>6),width:1+((t[2]&63)<<8|t[1])}}function ve(t){return{height:j(t,8)&16383,width:j(t,6)&16383}}const Ee={validate(t){const e=c(t,0,4)==="RIFF",s=c(t,8,12)==="WEBP",r=c(t,12,15)==="VP8";return e&&s&&r},calculate(t){const e=c(t,12,16);if(t=t.slice(20,30),e==="VP8X"){const r=t[0],i=(r&192)===0,n=(r&1)===0;if(i&&n)return Ie(t);throw new TypeError("Invalid WebP")}if(e==="VP8 "&&t[0]!==47)return ve(t);const s=E(t,3,6);if(e==="VP8L"&&s!=="9d012a")return be(t);throw new TypeError("Invalid WebP")}},F=new Map([["bmp",yt],["cur",Pt],["dds",xt],["gif",kt],["heif",Ot],["icns",Ht],["ico",nt],["j2c",Mt],["jp2",zt],["jpg",Kt],["ktx",qt],["png",ee],["pnm",se],["psd",re],["svg",le],["tga",he],["tiff",pe],["webp",Ee]]),ye=Array.from(F.keys()),Te=new Map([[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]);function Se(t){const e=t[0],s=Te.get(e);return s&&F.get(s).validate(t)?s:ye.find(r=>F.get(r).validate(t))}const Ae={disabledTypes:[]};function _e(t){const e=Se(t);if(typeof e<"u"){if(Ae.disabledTypes.indexOf(e)>-1)throw new TypeError("disabled file type: "+e);const s=F.get(e).calculate(t);if(s!==void 0)return s.type=s.type??e,s}throw new TypeError("unsupported file type: "+e)}async function Pe(t){const e=await fetch(t);if(!e.body||!e.ok)throw new Error("Failed to fetch image");const s=e.body.getReader();let r,i,n=new Uint8Array;for(;!r;){const o=await s.read();if(r=o.done,r)break;if(o.value){i=o.value;let f=new Uint8Array(n.length+i.length);f.set(n,0),f.set(i,n.length),n=f;try{const l=_e(n);if(l)return await s.cancel(),l}catch{}}}throw new Error("Failed to parse the size")}async function xe(){if(!globalThis?.astroAsset?.imageService){const{default:t}=await gt(()=>import("./astro/assets-service.Cg1E-ILE.js").then(e=>e.n),[]).catch(e=>{const s=new u(ut);throw s.cause=e,s});return globalThis.astroAsset||(globalThis.astroAsset={}),globalThis.astroAsset.imageService=t,t}return globalThis.astroAsset.imageService}async function Fe(t,e){if(!t||typeof t!="object")throw new u({...D,message:D.message(JSON.stringify(t))});if(typeof t.src>"u")throw new u({...C,message:C.message(t.src,"undefined",JSON.stringify(t))});const s=await xe(),r={...t,src:await tt(t.src)};if(t.inferSize&&U(r.src))try{const a=await Pe(r.src);r.width??=a.width,r.height??=a.height,delete r.inferSize}catch{throw new u({...G,message:G.message(r.src)})}const i=N(r.src)?r.src.fsPath:void 0,n=N(r.src)?r.src.clone??r.src:r.src;r.src=n;const o=s.validateOptions?await s.validateOptions(r,e):r,f=s.getSrcSet?await s.getSrcSet(o,e):[];let l=await s.getURL(o,e),w=await Promise.all(f.map(async a=>({transform:a.transform,url:await s.getURL(a.transform,e),descriptor:a.descriptor,attributes:a.attributes})));if(ft(s)&&globalThis.astroAsset.addStaticImage&&!(U(o.src)&&l===o.src)){const a=s.propertiesToHash??mt;l=globalThis.astroAsset.addStaticImage(o,a,i),w=f.map(m=>({transform:m.transform,url:globalThis.astroAsset.addStaticImage(m.transform,a,i),descriptor:m.descriptor,attributes:m.attributes}))}return{rawOptions:r,options:o,src:l,srcSet:{values:w,attribute:w.map(a=>`${a.url} ${a.descriptor}`).join(", ")},attributes:s.getHTMLAttributes!==void 0?await s.getHTMLAttributes(o,e):{}}}const ke=it("https://astro-cactus.chriswilliams.dev/"),Ne=st(async(t,e,s)=>{const r=t.createAstro(ke,e,s);r.self=Ne;const i=r.props;if(i.alt===void 0||i.alt===null)throw new u(et);typeof i.width=="string"&&(i.width=parseInt(i.width)),typeof i.height=="string"&&(i.height=parseInt(i.height));const n=await $(i),o={};return n.srcSet.values.length>0&&(o.srcset=n.srcSet.attribute),O`${rt()}<img${T(n.src,"src")}${v(o)}${v(n.attributes)}>`},"/home/runner/work/lokiwager.github.io/lokiwager.github.io/node_modules/.pnpm/astro@4.9.2_typescript@5.3.3/node_modules/astro/components/Image.astro",void 0),Oe=it("https://astro-cactus.chriswilliams.dev/"),Le=st(async(t,e,s)=>{const r=t.createAstro(Oe,e,s);r.self=Le;const i=["webp"],n="png",o=["gif","svg","jpg","jpeg"],{formats:f=i,pictureAttributes:l={},fallbackFormat:w,...a}=r.props;if(a.alt===void 0||a.alt===null)throw new u(et);const m=a.class?.match(/\bastro-\w{8}\b/)?.[0];m&&(l.class?l.class=`${l.class} ${m}`:l.class=m);for(const b in a)b.startsWith("data-astro-cid")&&(l[b]=a[b]);const S=await tt(a.src),lt=await Promise.all(f.map(async b=>await $({...a,src:S,format:b,widths:a.widths,densities:a.densities})));let R=w??n;!w&&N(S)&&o.includes(S.format)&&(R=S.format);const A=await $({...a,format:R,widths:a.widths,densities:a.densities}),B={},H={};return a.sizes&&(H.sizes=a.sizes),A.srcSet.values.length>0&&(B.srcset=A.srcSet.attribute),O`${rt()}<picture${v(l)}> ${Object.entries(lt).map(([b,y])=>{const ht=a.densities||!a.densities&&!a.widths?`${y.src}${y.srcSet.values.length>0?", "+y.srcSet.attribute:""}`:y.srcSet.attribute;return O`<source${T(ht,"srcset")}${T("image/"+y.options.format,"type")}${v(H)}>`})} <img${T(A.src,"src")}${v(B)}${v(A.attributes)}> </picture>`},"/home/runner/work/lokiwager.github.io/lokiwager.github.io/node_modules/.pnpm/astro@4.9.2_typescript@5.3.3/node_modules/astro/components/Picture.astro",void 0),$e={service:{entrypoint:"astro/assets/services/noop",config:{}},domains:["webmention.io"],remotePatterns:[]},$=async t=>await Fe(t,$e);export{$ as g,v as s};
